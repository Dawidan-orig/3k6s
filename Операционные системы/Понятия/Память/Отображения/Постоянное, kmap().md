Используется функция kmap тут.
kmap используется и для нижней, и для [[Верхняя память|верхней памяти]].

Для нижней возвращает виртуальный адрес страницы.
Для верхней делается это самое отображение, вплоть до перевода [[Процесс|процесса]] в состояние ожидания.

Постоянное отображение ограничено. А потому функция kunmap отменяет отображение верхней памяти.